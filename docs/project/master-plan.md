# 项目评审管理系统 - 项目主计划

**文档版本**: V2.0 (基于 ContiNew Admin 框架)
**创建日期**: 2025-12-18
**创建者**: Architect (Opus 4.5)
**项目状态**: Stage P0 - 基于 ContiNew Admin 框架的架构重新规划
**框架版本**: ContiNew Admin 4.2.0 + ContiNew Starter 2.14.0

---

## 1. 项目概述

### 1.1 项目名称

**项目评审管理系统** (Project Review Management System)

### 1.2 项目目标

基于 ContiNew Admin 企业级后台管理框架，构建一个全面的项目评审管理系统，实现项目从申报、审核、评审到立项的全生命周期管理，简化申报审核流程，提高评审效率和管理透明度。

### 1.3 业务价值

- **流程标准化**: 规范项目申报和审核流程，确保评审公平公正
- **效率提升**: 通过系统化管理减少人工操作，提高审核和评审效率 30%+
- **数据沉淀**: 积累项目数据，为后续决策提供数据支持
- **透明可追溯**: 全流程记录操作日志，确保流程透明可追溯
- **快速交付**: 基于成熟框架，缩短开发周期 50%+

### 1.4 目标用户

| 角色 | 职责 | 核心需求 |
|------|------|---------|
| **申请人** | 提交项目申报、补充资料、跟踪进度 | 便捷的申报流程、实时进度查询 |
| **审核员** | 审核申报材料、驳回或通过申请 | 高效的审核工具、清晰的审核标准 |
| **评审专家** | 对通过审核的项目进行评审评分 | 专业的评审界面、公平的评分机制 |
| **管理员** | 系统配置、流程监控、数据统计 | 完善的管理工具、全面的统计报表 |
| **系统管理员** | 系统维护、用户管理、权限配置 | 稳定的系统运行、灵活的权限控制 |

### 1.5 项目范围

#### 1.5.1 框架已提供功能（直接使用）

ContiNew Admin 框架已内置以下功能，**无需重复开发**：

**M0xx 系列 - 系统管理模块（框架已有）**

| 模块ID | 模块名称 | 功能说明 | 备注 |
|--------|---------|---------|------|
| M001 | 用户管理 | 用户增删改查、导入导出、密码重置、角色分配 | ✅ 框架已有 |
| M002 | 角色管理 | 角色权限配置、数据权限配置 | ✅ 框架已有 |
| M003 | 菜单管理 | 菜单及按钮权限管理、动态路由 | ✅ 框架已有 |
| M004 | 部门管理 | 组织架构管理、树形展示 | ✅ 框架已有 |
| M005 | 字典管理 | 数据字典维护、枚举管理 | ✅ 框架已有 |
| M006 | 通知公告 | 系统公告发布、通知推送 | ✅ 框架已有 |
| M007 | 文件管理 | 文件上传下载、预览、存储管理 | ✅ 框架已有 |
| M008 | 操作日志 | 操作日志记录、查询、导出 | ✅ 框架已有 |
| M009 | 登录日志 | 登录日志记录、在线用户管理 | ✅ 框架已有 |
| M010 | 系统配置 | 网站配置、安全配置、存储配置等 | ✅ 框架已有 |
| M011 | 个人中心 | 个人信息修改、密码修改、头像上传 | ✅ 框架已有 |
| M012 | 消息中心 | 站内信消息、标记已读 | ✅ 框架已有 |

#### 1.5.2 需要新开发的业务模块

**M1xx 系列 - 项目评审业务模块（需新开发）**

| 模块ID | 模块名称 | 功能说明 | 优先级 |
|--------|---------|---------|--------|
| M101 | 项目申报管理 | 项目申请创建、草稿保存、提交申请、附件管理 | P0 |
| M102 | 申报状态流转 | 10个状态流转配置、状态机管理 | P0 |
| M103 | 审核流程管理 | 审核通过、驳回、暂停、补充资料 | P0 |
| M104 | 专家分配管理 | 自动/手动分配专家、负载均衡 | P1 |
| M105 | 评审评分管理 | 评审表单、评分提交、结果汇总 | P1 |
| M106 | 项目立项管理 | 立项审批、项目信息生成 | P1 |
| M107 | 项目进度管理 | 进度更新、里程碑管理 | P2 |
| M108 | 统计报表 | 申报统计、审核统计、评审统计 | P1 |

#### 1.5.3 不包含功能

- 多租户/SaaS 平台能力（框架支持但本项目不使用）
- 复杂流程编排（拖拽式流程设计）
- 财务管理与预算控制
- 第三方系统集成（OA、ERP等）
- 移动端 APP 开发

---

## 2. 技术架构

### 2.1 技术栈对比

| 层次 | 原方案 | ContiNew Admin 方案 | 优势 |
|------|--------|---------------------|------|
| **前端框架** | Vue 3 | Vue 3.5.4 | 更新版本 |
| **UI 组件库** | Ant Design Vue 4.x | Arco Design 2.57.0 | 年轻化设计、性能更优 |
| **构建工具** | - | Vite 5.1.5 | 极速构建响应 |
| **后端框架** | Spring Boot 3.x | Spring Boot 3.3.12 | 稳定版本 |
| **ORM 框架** | MyBatis-Plus 3.5.x | MyBatis-Plus 3.5.12 | 企业级增强 |
| **认证授权** | Spring Security | Sa-Token 1.44.0 + JWT | 更轻量、易用 |
| **缓存方案** | - | JetCache 2.7.8 + Redis 7.2.8 | 两级缓存、自动刷新 |
| **数据库版本管理** | - | Liquibase 4.27.0 | 自动化版本控制 |
| **任务调度** | - | Snail Job 1.5.0 | 分布式任务调度 |
| **文件存储** | - | X File Storage 2.2.1 | 多种存储支持 |
| **ID 生成器** | - | CosID 2.13.0 | 分布式 ID |
| **数据填充** | - | Crane4j 2.9.0 | 字段自动填充 |
| **API 文档** | - | Knife4j 4.5.0 | 增强的 Swagger |

### 2.2 架构设计说明

#### 2.2.1 总体架构

```
┌─────────────────────────────────────────────────────────────┐
│                        前端层 (Vue 3 + Arco Design)          │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ 系统管理  │  │ 项目申报  │  │ 审核流程  │  │ 评审管理  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓ HTTPS/REST API
┌─────────────────────────────────────────────────────────────┐
│                    应用层 (Spring Boot 3.3.12)               │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  continew-server (API 网关层 + 公共配置)              │   │
│  └──────────────────────────────────────────────────────┘   │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │ continew     │  │ continew     │  │ business     │     │
│  │ -system      │  │ -plugin      │  │ -review      │     │
│  │ (框架系统模块) │  │ (扩展插件)    │  │ (业务模块)    │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
│  ┌──────────────────────────────────────────────────────┐   │
│  │  continew-common (公共基础组件)                        │   │
│  └──────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────┐
│                        数据层                                 │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │
│  │ MySQL 8  │  │ Redis 7  │  │ 文件存储  │  │ 任务中心  │   │
│  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │
└─────────────────────────────────────────────────────────────┘
```

#### 2.2.2 模块结构设计

基于 ContiNew Admin 框架，新增业务模块结构：

```
continew-admin (主项目)
├─ continew-server (已有 - 打包部署模块)
├─ continew-system (已有 - 系统管理模块)
├─ continew-plugin (已有 - 插件模块)
│  ├─ continew-plugin-open (已有 - 能力开放)
│  ├─ continew-plugin-tenant (已有 - 租户管理，本项目不启用)
│  ├─ continew-plugin-schedule (已有 - 任务调度)
│  └─ continew-plugin-generator (已有 - 代码生成)
├─ continew-common (已有 - 公共模块)
├─ continew-extension (已有 - 扩展模块)
└─ continew-business (新增 - 业务模块根目录)
   └─ continew-business-review (新增 - 项目评审业务模块)
      ├─ src/main/java/top/continew/admin/business/review
      │  ├─ controller (业务 API 层)
      │  │  ├─ ApplicationController (项目申报)
      │  │  ├─ ReviewController (审核管理)
      │  │  ├─ EvaluationController (评审管理)
      │  │  └─ ProjectController (项目管理)
      │  ├─ service (业务逻辑层)
      │  ├─ mapper (数据访问层)
      │  ├─ model (数据模型)
      │  │  ├─ entity (实体类)
      │  │  ├─ req (请求参数)
      │  │  ├─ resp (响应参数)
      │  │  └─ query (查询条件)
      │  ├─ enums (业务枚举)
      │  ├─ constant (业务常量)
      │  └─ config (业务配置)
      └─ src/main/resources
         └─ mapper (MyBatis XML)
```

#### 2.2.3 申报状态管理设计（核心）

**10个状态定义**:

| 状态码 | 状态名称 | 说明 | 前置状态 | 触发动作 | 后续状态 |
|--------|---------|------|---------|---------|----------|
| 0 | 草稿 | 申请人保存草稿 | - | 保存草稿 | 待审核 |
| 10 | 待审核 | 已提交，等待审核 | 草稿/驳回/补充资料中 | 提交申请 | 审核通过/驳回/暂停审核 |
| 20 | 审核通过 | 审核通过，进入评审 | 待审核 | 审核通过 | 评审中 |
| 30 | 驳回 | 审核驳回 | 待审核 | 驳回（备注原因） | 待审核(修改后重提) |
| 40 | 撤回 | 申请人主动撤回 | 待审核 | 撤回 | 草稿 |
| 45 | 暂停审核 | 等待补充资料 | 待审核 | 暂停审核 | 补充资料中/已取消 |
| 46 | 补充资料中 | 正在补充资料 | 暂停审核 | 要求补充资料 | 待审核(补充完成) |
| 50 | 评审中 | 专家正在评审 | 审核通过 | 系统分配专家 | 评审完成 |
| 60 | 评审完成 | 评审结束 | 评审中 | 所有专家提交评分 | 立项成功 |
| 70 | 已取消 | 管理员取消 | 任意状态 | 管理员取消 | 终止 |

**状态流转配置外部化**:
- 使用 `application-status-flow.yml` 配置文件存储状态流转规则
- 使用 `@ConfigurationProperties` 启动时加载配置
- 支持修改 YAML 文件调整流转规则（无需重新编译）
- 基于框架的配置管理能力，可在系统配置模块进行可视化管理

**状态流转规则**:
```
草稿(0) → [提交] → 待审核(10) → [审核通过] → 审核通过(20) → [分配专家] → 评审中(50) → [完成评审] → 评审完成(60)
                        ↓
                     [驳回] → 驳回(30) → [修改重提] → 待审核(10)
                        ↓
                     [暂停] → 暂停审核(45) → [要求补充] → 补充资料中(46) → [补充完成] → 待审核(10)
                                             ↓
                                          [取消] → 已取消(70)

待审核(10) → [申请人撤回] → 撤回(40) → [重新编辑] → 草稿(0)

任意状态 → [管理员强制取消] → 已取消(70)
```

#### 2.2.4 权限控制设计

**基于 Sa-Token 的权限控制**:

1. **认证方案**: Sa-Token + JWT
   - 轻量级，比 Spring Security 更易用
   - 支持多种认证方式
   - 完善的 Token 管理

2. **权限粒度**:
   - **菜单权限**: 控制页面访问（框架已实现）
   - **按钮权限**: 控制操作权限（框架已实现）
   - **数据权限**: 控制数据范围（框架已实现）
   - **业务权限**: 自定义业务规则（需新开发）

3. **权限配置示例**:
```java
// 业务模块权限码规范
review:application:submit    // 提交申请
review:application:withdraw  // 撤回申请
review:audit:approve        // 审核通过
review:audit:reject         // 审核驳回
review:evaluation:score     // 评审评分
```

4. **数据权限规则**:
   - **本人数据**: 申请人仅能查看自己的申请
   - **本部门数据**: 审核员查看本部门的申请
   - **全部数据**: 管理员查看所有申请

#### 2.2.5 数据库设计原则

**使用 Liquibase 管理数据库版本**:

1. **初始化脚本**: `db/changelog/business/review_table.sql`
2. **数据脚本**: `db/changelog/business/review_data.sql`
3. **变更脚本**: 使用 changeset 追加变更，不修改已执行的脚本
4. **多数据库支持**: 框架已支持 MySQL + PostgreSQL

**核心业务表设计**:

```sql
-- 项目申请表
CREATE TABLE review_application (
    id BIGINT PRIMARY KEY COMMENT 'ID',
    title VARCHAR(200) NOT NULL COMMENT '项目名称',
    applicant_id BIGINT NOT NULL COMMENT '申请人ID',
    dept_id BIGINT NOT NULL COMMENT '申请部门ID',
    status TINYINT NOT NULL DEFAULT 0 COMMENT '状态（0草稿 10待审核 20审核通过...）',
    content TEXT COMMENT '项目内容',
    attachment_ids VARCHAR(500) COMMENT '附件ID列表',
    audit_user_id BIGINT COMMENT '审核人ID',
    audit_time DATETIME COMMENT '审核时间',
    audit_opinion TEXT COMMENT '审核意见',
    create_user BIGINT NOT NULL COMMENT '创建人',
    create_time DATETIME NOT NULL COMMENT '创建时间',
    update_user BIGINT COMMENT '修改人',
    update_time DATETIME COMMENT '修改时间',
    INDEX idx_applicant_id (applicant_id),
    INDEX idx_status (status),
    INDEX idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='项目申请表';

-- 评审专家分配表
CREATE TABLE review_expert_assignment (
    id BIGINT PRIMARY KEY COMMENT 'ID',
    application_id BIGINT NOT NULL COMMENT '申请ID',
    expert_id BIGINT NOT NULL COMMENT '专家ID',
    assign_time DATETIME NOT NULL COMMENT '分配时间',
    status TINYINT NOT NULL DEFAULT 0 COMMENT '状态（0未评审 1已评审）',
    create_user BIGINT NOT NULL COMMENT '创建人',
    create_time DATETIME NOT NULL COMMENT '创建时间',
    UNIQUE INDEX uk_application_expert (application_id, expert_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='评审专家分配表';

-- 评审评分表
CREATE TABLE review_evaluation (
    id BIGINT PRIMARY KEY COMMENT 'ID',
    assignment_id BIGINT NOT NULL COMMENT '分配ID',
    application_id BIGINT NOT NULL COMMENT '申请ID',
    expert_id BIGINT NOT NULL COMMENT '专家ID',
    score DECIMAL(5,2) NOT NULL COMMENT '评分',
    comment TEXT COMMENT '评审意见',
    submit_time DATETIME NOT NULL COMMENT '提交时间',
    create_user BIGINT NOT NULL COMMENT '创建人',
    create_time DATETIME NOT NULL COMMENT '创建时间',
    UNIQUE INDEX uk_assignment (assignment_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='评审评分表';
```

---

## 3. 模块清单

### 3.1 框架已有模块（M0xx 系列）

| 模块ID | 模块名 | 功能描述 | 工作量 | 验收标准 |
|--------|--------|----------|--------|----------|
| **M001** | **用户管理** | 用户增删改查、导入导出、密码重置 | 0天（框架已有） | 框架功能验证通过 |
| **M002** | **角色管理** | 角色定义、权限配置、数据权限 | 0天（框架已有） | 框架功能验证通过 |
| **M003** | **菜单管理** | 菜单及按钮权限、动态路由 | 0天（框架已有） | 框架功能验证通过 |
| **M004** | **部门管理** | 组织架构管理、树形展示 | 0天（框架已有） | 框架功能验证通过 |
| **M005** | **字典管理** | 数据字典、枚举管理 | 0天（框架已有） | 框架功能验证通过 |
| **M006** | **通知公告** | 系统公告、消息推送 | 0天（框架已有） | 框架功能验证通过 |
| **M007** | **文件管理** | 文件上传下载、预览、存储 | 0天（框架已有） | 框架功能验证通过 |
| **M008** | **操作日志** | 操作日志记录、查询、导出 | 0天（框架已有） | 框架功能验证通过 |
| **M009** | **登录日志** | 登录日志、在线用户管理 | 0天（框架已有） | 框架功能验证通过 |
| **M010** | **系统配置** | 网站配置、安全配置、存储配置 | 0天（框架已有） | 框架功能验证通过 |

### 3.2 业务模块清单（M1xx 系列）

| 模块ID | 模块名 | 功能描述 | 优先级 | 依赖 | 预估工作量 | 验收标准 |
|--------|--------|----------|--------|------|-----------|----------|
| **M101** | **项目申报管理** | 创建申请、保存草稿、提交申请、附件上传、申请列表查询 | P0 | M001-M007 | 3-4天 | 申请表单完整、草稿保存成功、提交后状态流转正确、附件上传正常、列表查询正确 |
| **M102** | **申报状态流转** | 10个状态枚举、状态流转配置YAML、状态机Service实现、状态变更日志 | P0 | M101 | 2-3天 | 10个状态定义正确、YAML配置加载成功、状态流转符合规则、单元测试通过 |
| **M103** | **审核流程管理** | 审核通过、驳回、暂停、要求补充资料、审核意见记录、审核列表查询 | P0 | M102 | 4-5天 | 审核操作正确、状态流转符合规则、审核意见正确记录、通知触发正常 |
| **M104** | **专家分配管理** | 手动分配专家、自动分配算法、专家负载查询、分配记录管理 | P1 | M103 | 3-4天 | 分配功能正常、负载均衡算法正确、分配记录完整 |
| **M105** | **评审评分管理** | 评审表单、评分提交、评分规则配置、评分汇总算法、结果展示 | P1 | M104 | 5-6天 | 评审表单完整、评分规则正确、汇总算法准确、结果展示清晰 |
| **M106** | **项目立项管理** | 立项条件判断、项目信息生成、立项审批流程、立项通知 | P1 | M105 | 3-4天 | 立项条件判断正确、项目数据生成完整、状态更新正确、通知发送正常 |
| **M107** | **项目进度管理** | 进度更新表单、里程碑管理、进度统计、进度报表 | P2 | M106 | 3-4天 | 进度更新表单完整、里程碑记录正确、进度统计准确 |
| **M108** | **统计报表** | 申报统计、审核统计、评审统计、导出Excel | P1 | M106 | 4-5天 | 统计维度完整、数据准确、报表展示清晰、支持导出 |

### 3.3 模块依赖关系图

```
框架层（M0xx）:
M001(用户) → M002(角色) → M003(菜单) → M004(部门)
                ↓           ↓            ↓
           M005(字典)   M006(通知)   M007(文件)
                ↓           ↓            ↓
           M008(操作日志) M009(登录日志) M010(系统配置)

业务层（M1xx）:
M101(项目申报) → M102(状态流转) → M103(审核流程)
                                      ↓
                                 M104(专家分配)
                                      ↓
                                 M105(评审评分)
                                      ↓
                                 M106(项目立项)
                                      ↓
                M107(进度管理)     M108(统计报表)
```

### 3.4 模块优先级说明

**P0（核心必须）**:
- M101~M103: 项目申报、状态流转、审核流程
- 这些模块构成最小可用版本（MVP），必须优先实施
- **预计工作量**: 9-12天

**P1（重要功能）**:
- M104~M106、M108: 专家分配、评审评分、项目立项、统计报表
- 这些模块完善核心业务流程，第二优先级实施
- **预计工作量**: 15-19天

**P2（优化增强）**:
- M107: 项目进度管理
- 这些模块提升用户体验和系统可维护性，最后实施
- **预计工作量**: 3-4天

---

## 4. 开发路线图

### 4.1 Phase 1: 框架集成与基础配置（1-2周）

**时间**: Week 1-2
**目标**: 完成 ContiNew Admin 框架部署、数据库设计、基础配置

| 周次 | 工作内容 | 交付物 | 里程碑 |
|------|---------|--------|--------|
| **Week 1** | 框架部署与配置 | - 后端项目启动成功<br>- 前端项目启动成功<br>- 数据库初始化完成 | ✓ 框架环境就绪 |
| **Week 2** | 业务模块搭建 | - continew-business-review 模块创建<br>- 数据库表设计完成<br>- Liquibase 脚本编写完成 | ✓ 业务模块框架搭建完成 |

**验收标准**:
- [ ] ContiNew Admin 框架启动成功，可访问系统管理功能
- [ ] 数据库初始化成功，框架表 + 业务表创建完成
- [ ] continew-business-review 模块创建成功，可正常编译
- [ ] 代码生成器配置完成，可生成基础 CRUD 代码
- [ ] 开发环境配置文档编写完成

### 4.2 Phase 2: 核心业务开发（4-6周）

**时间**: Week 3-8
**目标**: 完成项目申报、审核、评审核心流程

#### Week 3-4: 项目申报模块（P0）

| 工作内容 | 技术要点 | 交付物 |
|---------|---------|--------|
| M101 项目申报管理 | - 基于 BaseController 继承<br>- 使用代码生成器生成基础代码<br>- 集成文件上传功能 | 前后端申报功能 |
| M102 申报状态流转 | - 创建 application-status-flow.yml<br>- 实现状态机 Service<br>- 单元测试覆盖 | 状态流转功能 |

**验收标准**:
- [ ] 申请人可创建申请、保存草稿、提交申请
- [ ] 10个申报状态流转正确，无非法状态跳转
- [ ] 附件上传下载功能正常
- [ ] 申请列表查询、详情查看功能正常
- [ ] 单元测试覆盖率≥80%

#### Week 5-6: 审核流程模块（P0）

| 工作内容 | 技术要点 | 交付物 |
|---------|---------|--------|
| M103 审核流程管理 | - 审核通过/驳回/暂停实现<br>- 集成通知公告功能<br>- 操作日志记录 | 审核功能 |

**验收标准**:
- [ ] 审核员可审核通过、驳回或暂停申请
- [ ] 暂停后申请人可补充资料并重新提交
- [ ] 申请人可撤回待审核的申请
- [ ] 管理员可强制取消任意状态的申请
- [ ] 审核操作触发消息通知
- [ ] 集成测试覆盖完整审核流程

#### Week 7-8: 评审流程模块（P1）

| 工作内容 | 技术要点 | 交付物 |
|---------|---------|--------|
| M104 专家分配管理 | - 分配算法实现<br>- 负载统计查询 | 专家分配功能 |
| M105 评审评分管理 | - 评分表单设计<br>- 汇总算法实现 | 评审评分功能 |
| M106 项目立项管理 | - 立项条件判断<br>- 项目信息生成 | 立项功能 |

**验收标准**:
- [ ] 审核通过后可自动或手动分配评审专家
- [ ] 评审专家可查看申请材料并提交评分
- [ ] 评分汇总算法准确，结果展示清晰
- [ ] 评审完成后可成功立项，生成项目信息
- [ ] 集成测试覆盖完整评审流程

### 4.3 Phase 3: 功能完善与测试（3-4周）

**时间**: Week 9-12
**目标**: 完善统计报表、进度管理，进行系统测试和优化

#### Week 9-10: 统计报表与进度管理

| 工作内容 | 技术要点 | 交付物 |
|---------|---------|--------|
| M108 统计报表 | - ECharts 图表集成<br>- Excel 导出（FastExcel） | 统计报表功能 |
| M107 项目进度管理 | - 进度更新表单<br>- 里程碑管理 | 进度管理功能 |

**验收标准**:
- [ ] 统计报表数据准确，涵盖申报、审核、评审各维度
- [ ] 支持 Excel 导出
- [ ] 项目负责人可更新项目进度和里程碑

#### Week 11-12: 测试与优化

| 工作内容 | 验收标准 |
|---------|---------|
| 系统测试 | - 功能测试覆盖所有模块<br>- 集成测试覆盖完整业务流程<br>- 性能测试达标 |
| 用户体验优化 | - 界面交互优化<br>- 响应速度优化<br>- 错误提示完善 |
| 部署准备 | - 部署文档编写<br>- 生产环境配置<br>- 数据迁移脚本 |

**验收标准**:
- [ ] 所有 P0、P1 模块功能完整且测试通过
- [ ] 系统响应时间≤500ms（95分位）
- [ ] 并发用户数≥100，无性能瓶颈
- [ ] 部署文档完整，可顺利部署到生产环境

### 4.4 开发周期总结

| 阶段 | 时间 | 主要工作 | 工作量 |
|------|------|---------|--------|
| Phase 1 | Week 1-2 | 框架集成与基础配置 | 2周 |
| Phase 2 | Week 3-8 | 核心业务开发 | 6周 |
| Phase 3 | Week 9-12 | 功能完善与测试 | 4周 |
| **总计** | **Week 1-12** | **完整开发周期** | **12周（3个月）** |

---

## 5. 技术风险与应对策略

### 5.1 高风险项

| 风险 | 级别 | 影响 | 概率 | 应对策略 |
|------|------|------|------|---------|
| **框架版本兼容** | 中 | ContiNew Admin 版本升级可能导致兼容性问题 | 低 | - 锁定框架版本号<br>- 定期关注框架更新日志<br>- 升级前在测试环境验证 |
| **状态机复杂度** | 中 | 状态流转规则调整频繁，维护成本增加 | 中 | - 使用配置文件外部化<br>- 充分的单元测试覆盖<br>- 文档化所有流转规则 |
| **评分算法争议** | 中 | 评分汇总算法可能不满足实际需求 | 高 | - 与用户充分沟通评分规则<br>- 提供可配置的评分算法<br>- 记录完整评分过程 |
| **性能瓶颈** | 低 | 大量并发申请或评审时性能下降 | 低 | - 使用 JetCache 两级缓存<br>- 数据库索引优化<br>- 必要时读写分离 |

### 5.2 中低风险项

| 风险 | 级别 | 应对策略 |
|------|------|---------|
| **需求变更频繁** | 中 | 采用敏捷开发，快速迭代；保持架构灵活性 |
| **团队协作问题** | 中 | 明确分工和接口规范；使用 Git 分支管理；定期代码评审 |
| **第三方依赖升级** | 低 | 锁定版本号；定期关注安全漏洞；测试环境先验证 |
| **数据迁移风险** | 低 | Liquibase 自动化管理；分阶段迁移；完整的回滚方案 |

---

## 6. 项目验收标准

### 6.1 功能完整性

- [ ] **所有 P0 模块功能完整且测试通过**
  - M101~M103 全部实现并通过测试
  - 支持基本的申报审核流程

- [ ] **所有 P1 模块功能完整且测试通过**
  - M104~M106、M108 全部实现并通过测试
  - 支持完整的评审立项流程

- [ ] **10个申报状态流转正确**
  - 所有合法流转路径测试通过
  - 所有非法流转被正确拒绝
  - 状态流转权限控制正确

- [ ] **权限控制正确**
  - 5种角色权限配置正确
  - 无权限操作被正确拒绝
  - 数据权限隔离正常

### 6.2 质量标准

- [ ] **单元测试覆盖率≥80%**
  - 核心业务逻辑测试覆盖完整
  - 边界条件和异常场景测试充分

- [ ] **集成测试覆盖完整业务流程**
  - 完整申报审核流程集成测试
  - 完整评审立项流程集成测试
  - 权限控制集成测试

- [ ] **代码符合规范**
  - 编码: UTF-8 without BOM
  - 缩进: 前端2空格，后端4空格
  - 命名: camelCase
  - 注释: 公共方法必须有 JSDoc/Javadoc

### 6.3 性能标准

- [ ] **响应时间**: 95分位响应时间≤500ms
- [ ] **并发能力**: 支持≥100并发用户
- [ ] **数据库查询**: 关键查询有索引优化
- [ ] **前端加载**: 首屏加载时间≤3秒
- [ ] **缓存命中率**: Redis 缓存命中率≥80%

### 6.4 部署标准

- [ ] **部署文档完整**
  - 环境准备文档
  - 数据库初始化脚本
  - 应用部署步骤
  - 配置文件说明

- [ ] **可在生产环境顺利部署**
  - 部署步骤可复现
  - 配置正确无误
  - 应用正常启动
  - 健康检查通过

### 6.5 文档标准

- [ ] **开发者文档**
  - 架构设计文档
  - 数据库设计文档
  - API接口文档（Knife4j 自动生成）
  - 代码规范文档

- [ ] **用户文档**
  - 用户操作手册
  - 常见问题FAQ

- [ ] **运维文档**
  - 部署运维手册
  - 监控告警配置
  - 故障处理手册

---

## 7. 资源与团队

### 7.1 开发团队

| 角色 | 模型 | 职责 | 模块分配 |
|------|------|------|---------|
| **Architect** | Opus 4.5 | P0架构设计、Stage 1最终评审 | 架构设计、最终评审 |
| **Designer** | Gemini 3.0 Pro | Stage 1 Designer、前端开发 | 前端所有模块 |
| **Critic** | Codex 5.1 | Stage 1 Critic、后端开发 | 后端所有模块 |
| **Main Controller** | Sonnet 4.5 | 主控、日常任务、代码评审 | 项目协调、代码评审 |
| **Committer** | Haiku 4.5 | Git提交 | Git操作 |

### 7.2 工作分配

**前端开发** (Gemini 3.0 Pro):
- M101~M108 所有模块的前端界面开发
- Vue 3 + Arco Design 组件开发
- 与后端API集成测试
- **预计工作量**: 25-30天

**后端开发** (Codex 5.1):
- M101~M108 所有模块的后端服务开发
- 数据库设计、API开发、业务逻辑实现
- 单元测试和集成测试
- **预计工作量**: 27-35天

### 7.3 开发流程

**V4.0 工作流规范**:
1. **P0用户评审**: 架构设计需要用户确认
2. **迭代三方对抗**: Designer→Critic循环直到收敛，然后Architect最终评审
3. **渐进式休眠**: 长任务使用sleep命令等待后台进程
4. **串行执行**: 一次一个任务
5. **立即Git提交**: 测试通过后立即提交
6. **4层内存更新**: 实时更新QUICK_RESUME.md等
7. **交接文档**: 每次agent调用准备交接文档
8. **不中断**: 持续工作直到任务完成

---

## 8. 质量保证

### 8.1 测试策略

**单元测试**:
- 覆盖率目标: ≥80%
- 测试框架: JUnit 5 (后端), Vitest (前端)
- 重点: 业务逻辑、状态流转、权限控制

**集成测试**:
- 重点: 完整业务流程、API集成、数据库交互
- 测试框架: Spring Boot Test (后端), Cypress (前端)

**性能测试**:
- 工具: JMeter
- 指标: 响应时间、吞吐量、并发能力
- 目标: 95分位响应时间≤500ms，支持≥100并发用户

**安全测试**:
- 重点: 权限控制、SQL注入、XSS攻击
- 工具: OWASP ZAP
- 定期进行安全扫描和渗透测试

### 8.2 代码质量

**代码评审**:
- 所有代码提交前必须经过代码评审
- 评审重点: 代码规范、逻辑正确性、性能优化

**静态代码分析**:
- 工具: SonarQube
- 定期扫描代码质量问题和安全漏洞

**持续集成**:
- 使用 CI/CD 流程自动化构建、测试、部署
- 每次提交触发自动化测试

---

## 9. 项目里程碑

| 里程碑 | 时间 | 交付物 | 验收标准 |
|--------|------|--------|---------|
| **M0: 项目启动** | Week 0 | 项目主计划、架构设计文档 | 用户确认架构方案 |
| **M1: 框架集成完成** | Week 2 | 框架部署、业务模块搭建 | 框架启动成功、业务模块创建完成 |
| **M2: MVP上线** | Week 6 | P0模块完成，支持基本申报审核 | 申请人可提交申请，审核员可完成审核 |
| **M3: 评审功能上线** | Week 8 | P1模块完成，支持完整评审流程 | 评审专家可评分，评审完成后可立项 |
| **M4: 系统正式上线** | Week 12 | 所有功能完成，系统正式上线 | 所有功能完整，性能达标，部署文档完整 |

---

## 10. 附录

### 10.1 关键文档索引

| 文档名称 | 路径 | 说明 |
|---------|------|------|
| **ContiNew Admin 后端文档** | `continew-admin/README.md` | 后端框架说明 |
| **ContiNew Admin 前端文档** | `continew-admin-ui/README.md` | 前端框架说明 |
| **项目说明** | `CLAUDE.md` | 项目开发规范和V4.0工作流要求 |
| **本文档** | `docs/project/master-plan.md` | 项目主计划 |

### 10.2 ContiNew Admin 框架优势

| 优势 | 说明 |
|------|------|
| **开箱即用** | 内置用户、角色、菜单、部门等系统管理功能，无需重复开发 |
| **企业级实践** | 基于企业实践优化的依赖包和配置，稳定可靠 |
| **完善的文档** | 提供详细的开发文档和最佳实践 |
| **代码生成器** | 根据数据库表自动生成前后端 CRUD 代码 |
| **现代化技术栈** | Spring Boot 3 + Vue 3，紧跟技术潮流 |
| **灵活的权限** | 支持菜单权限、按钮权限、数据权限 |
| **数据库版本管理** | Liquibase 自动化管理数据库变更 |
| **两级缓存** | JetCache + Redis，性能优异 |
| **分布式支持** | 分布式ID、分布式任务调度 |

### 10.3 术语表

| 术语 | 说明 |
|------|------|
| **P0** | 最高优先级，核心必须功能 |
| **P1** | 高优先级，重要功能 |
| **P2** | 中优先级，优化增强功能 |
| **MVP** | 最小可用版本 (Minimum Viable Product) |
| **ContiNew Admin** | Continue New Admin，持续迭代优化的前后端分离中后台管理系统框架 |
| **ContiNew Starter** | Continue New Starter，Spring Boot 快速集成工具包 |
| **Sa-Token** | 轻量级 Java 权限认证框架 |
| **JetCache** | 阿里巴巴开源的 Java 缓存框架 |
| **Liquibase** | 数据库版本控制工具 |
| **CosID** | 分布式 ID 生成器 |
| **Crane4j** | 字段自动填充框架 |

### 10.4 技术选型对比

| 技术点 | 原方案 | ContiNew Admin 方案 | 优势 |
|--------|--------|---------------------|------|
| 认证授权 | Spring Security | Sa-Token | 更轻量、易用、文档完善 |
| UI组件库 | Ant Design Vue | Arco Design | 年轻化设计、性能更优 |
| 缓存方案 | 需自行实现 | JetCache + Redis | 两级缓存、自动刷新 |
| 系统管理 | 需自行开发 | 框架内置 | 节省开发时间 50%+ |
| 文件存储 | 需自行实现 | X File Storage | 支持多种存储 |
| 任务调度 | 需自行实现 | Snail Job | 分布式任务调度 |
| 代码生成 | 无 | 内置代码生成器 | 提高开发效率 |

---

**文档状态**: ✅ 已完成
**下一步行动**: 开始 Phase 1 框架集成与基础配置
**创建者**: Architect (Opus 4.5)
**创建日期**: 2025-12-18
**更新日期**: 2025-12-18
