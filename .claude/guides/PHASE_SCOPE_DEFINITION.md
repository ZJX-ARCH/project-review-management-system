# 各阶段明确范围定义（Phase Scope Definition）

> **版本**：V4.0
> **目的**：明确定义每个阶段的范围，防止过度设计或设计不足

---

## 🚨 核心问题

**问题**：AI 不知道设计要做到什么程度，可能过度或不足

**V4.0 解决方案**：每个阶段都有明确的范围和检查清单

---

## 📋 V4.0 各阶段范围定义

### Stage 0: 需求细化

**范围**：明确模块的具体需求

**必须完成（MUST）**：
- 核心目标（1-2句话）
- 功能范围（包含/不包含）
- 核心功能列表
- 验收标准
- 非功能需求

**禁止做（MUST NOT）**：
- ❌ 不设计数据库表结构
- ❌ 不设计 API 接口
- ❌ 不写代码示例

**输出**：`00-requirement.md`

---

### Stage 1: 三方对抗设计

#### 1.1 Designer 起草

**范围**：创建初始设计草案

**必须完成（MUST）**：
- 前端设计（组件、页面、路由）
- 后端设计（Entity、Service、API）
- 数据库设计（完整DDL）
- 安全设计、性能设计

**输出**：`01-design-draft.md`

#### 1.2 Critic 攻击

**范围**：找出设计中的所有问题

**6 个审查维度**：
1. 完整性（20%）
2. 可行性（15%）
3. 安全性（20%）
4. 性能（10%）
5. 编码规范（20%）
6. 可维护性（15%）

**输出**：`01-critique.md`

#### 1.3 Architect 终审

**范围**：架构级把关

**必须检查（MUST）**：
- 林纳斯三问
- 架构一致性
- 技术债检查

**输出**：`01-architect-verdict.md`

---

### Stage 2: 任务分解

**范围**：将模块拆分为可执行的任务

**必须完成（MUST）**：
- 子模块清单
- 每个子模块的任务清单
- 预估时间

**输出**：`02-tasks.md`

---

### Stage 3-4: 前后端实现

**范围**：根据设计文档实现代码

**必须完成（MUST）**：
- 所有代码文件
- 配置文件
- 单元测试（包含中文测试）

**禁止做（MUST NOT）**：
- ❌ 不偏离设计
- ❌ 不过度优化
- ❌ 不添加未设计的功能

---

### Stage 5: 代码审查

**范围**：6个方面详细审查代码

**审查维度**（同 Critic）：
1. 完整性
2. 可行性
3. 安全性
4. 性能
5. 编码规范
6. 可维护性

**输出**：`05-review.md`

---

### Stage 7: 测试验证

**范围**：运行所有测试，确保通过

**必须完成（MUST）**：
- 单元测试通过
- 集成测试通过
- 中文测试通过
- 编码验证脚本通过

---

### Stage 8: Git提交（V4.0强制）

**范围**：立即Git提交

**必须完成（MUST）**：
- 测试通过后立即提交
- 提交消息包含Claude标记
- 更新4层记忆

---

### Stage 9: 模块交付

**范围**：完成模块交付文档

**必须完成（MUST）**：
- 交付清单
- 测试结果
- Git提交记录
- V4.0工作流总结

**输出**：`09-delivery.md`

---

## 🎯 核心优势

### 1. 范围明确，防止乱设计
- 每个阶段都有清晰的 MUST / MUST NOT
- AI 知道该做什么，不该做什么

### 2. 完整且不冗余
- 范围覆盖完整，不过度

### 3. 高效执行
- 明确的输入和输出
- 明确的完成标准

### 4. V4.0 特性集成
- 三方对抗设计
- 立即Git提交
- 4层记忆系统

---

**范围定义完成，每个阶段都有明确边界！**
